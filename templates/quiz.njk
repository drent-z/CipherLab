---
layout: layout.njk
title: Cryptography Quiz - CipherLab
---
<section class="hero" id="quiz-hero">
    <div class="hero-gradient-container"></div>
    <div class="row hero-row">
        <div class="col-12 text-center">
            <h1 class="page-heading">Cryptography Challenge</h1>
            <div class="hero-content">
                <p class="mb-4 fade-in hero-subtitle">Test your knowledge of cryptography concepts</p>
            </div>
        </div>
    </div>
    
</section>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Quiz Start Screen -->
            <div class="simple-card" id="quiz-start-screen">
                <div class="section-header">
                    <i class="fas fa-trophy"></i>
                    <h2>Take the Quiz</h2>
                </div>
                
                <div class="simple-text">
                    <p>Ready to test what you've learned? This quiz will check your understanding of cryptography in a fun, interactive way.</p>
                    
                    <div class="quiz-features">
                        <div class="feature-item">
                            <i class="fas fa-question-circle"></i>
                            <div class="feature-text">
                                <h3>10 Questions</h3>
                                <p>Multiple choice format with helpful explanations</p>
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <i class="fas fa-star"></i>
                            <div class="feature-text">
                                <h3>Earn Points</h3>
                                <p>Get 10 points for each correct answer</p>
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <i class="fas fa-certificate"></i>
                            <div class="feature-text">
                                <h3>Get a Badge</h3>
                                <p>Earn recognition for your cryptography knowledge</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="difficulty-section">
                    <h3>Choose Your Level:</h3>
                    <div class="difficulty-options">
                        <button class="difficulty-option selected" data-level="beginner">
                            <i class="fas fa-star"></i>
                            <span>Beginner</span>
                        </button>
                        <button class="difficulty-option" data-level="intermediate">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i>
                            <span>Intermediate</span>
                        </button>
                        <button class="difficulty-option" data-level="advanced">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                            <span>Advanced</span>
                        </button>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <button id="start-quiz-button" class="primary-button">
                        <i class="fas fa-play"></i> Start Quiz
                    </button>
                </div>
            </div>
            
            <!-- Quiz Questions -->
            <div class="simple-card" id="quiz-questions-screen" style="display: none;">
                <div class="quiz-progress-header">
                    <div class="progress-info">
                        <span>Question <span id="current-question-num">1</span> of <span id="total-questions">10</span></span>
                        <span class="score-display"><i class="fas fa-star"></i> <span id="current-score">0</span> points</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-value" style="width: 10%;"></div>
                    </div>
                </div>
                
                <div id="question-container">
                    <!-- Questions will be dynamically inserted here -->
                </div>
            </div>
            
            <!-- Results Screen -->
            <div class="simple-card" id="quiz-results-screen" style="display: none;">
                <div class="section-header">
                    <i class="fas fa-award"></i>
                    <h2>Quiz Complete!</h2>
                </div>
                
                <div class="results-summary">
                    <div class="score-circle">
                        <span id="final-score">0</span>
                        <span class="score-label">points</span>
                    </div>
                    
                    <div class="results-details">
                        <div class="result-stat">
                            <div class="stat-label">Correct Answers:</div>
                            <div class="stat-value"><span id="correct-count">0</span>/<span id="total-count">0</span></div>
                        </div>
                        <div class="result-stat">
                            <div class="stat-label">Your Accuracy:</div>
                            <div class="stat-value"><span id="accuracy-percent">0</span>%</div>
                        </div>
                    </div>
                </div>
                
                <div class="feedback-box">
                    <h3>Your Results</h3>
                    <p id="feedback-message">Great job! You have a solid understanding of cryptography basics.</p>
                </div>
                
                <div class="badge-container">
                    <div class="badge">
                        <div class="badge-icon" id="badge-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="badge-name" id="badge-name">Crypto Scholar</div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="review-answers-button" class="primary-button">
                        <i class="fas fa-search"></i> Review Answers
                    </button>
                    <button id="retry-quiz-button" class="secondary-button">
                        <i class="fas fa-redo"></i> Try Again
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Page heading styling */
    .page-heading {
        color: var(--primary);
        font-size: 3rem;
        margin-bottom: 1.5rem;
        text-align: center;
        font-weight: 700;
        position: relative;
        display: inline-block;
    }
    
    /* Hero subtitle styling */
    .hero-subtitle {
        font-size: 1.5rem !important;
        line-height: 1.6 !important;
        color: var(--text) !important;
        margin-top: 1rem !important;
        margin-bottom: 1.5rem !important;
        max-width: 800px !important;
        margin-left: auto !important;
        margin-right: auto !important;
        text-align: center !important;
    }
    
    /* Hero content must be centered */
    .hero-content {
        margin-top: 1rem !important;
        position: relative !important;
        display: block !important;
        width: 100% !important;
        text-align: center !important;
    }
    
    /* Hero Styling */
    #quiz-hero {
        position: relative;
        min-height: 40vh; /* Shorter than main page hero */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 3rem 0;
        width: 100%;
        max-width: 100%;
        pointer-events: auto;
        z-index: 1;
        margin-bottom: 2rem;
    }
    
    /* Force row to be full-width */
    #quiz-hero .hero-row {
        width: 100%;
        max-width: 100%;
        margin: 0 !important;
        padding: 0 1rem;
        overflow: visible;
    }
    
    /* Binary stream animation - matching index page */
    .binary-stream {
        position: absolute;
        bottom: 20px;
        font-family: 'IBM Plex Mono', monospace;
        color: var(--primary);
        opacity: 0.3;
        font-size: 1rem;
        white-space: nowrap;
        width: 100%;
        padding-right: 100vw;
        pointer-events: none;
        left: 50%;
        transform: translateX(-50%);
        animation: binaryScroll 15s linear infinite;
    }
    
    /* Match feature boxes on index */
    .feature-item {
        background-color: var(--medium-dark);
        border: 1px solid var(--primary-dark);
        border-radius: 12px;
        padding: 1.5rem;
        transition: transform 0.4s ease, box-shadow 0.4s ease;
    }
    
    .feature-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        border-color: var(--primary);
    }
    
    /* Primary buttons matching CTA style */
    .primary-button {
        background: linear-gradient(45deg, var(--primary-dark), var(--primary));
        color: var(--dark);
        font-weight: 700;
        border: 1px solid var(--primary);
    }
    
    /* Simple Card */
    .simple-card {
        background-color: var(--medium-dark);
        border-radius: 10px;
        padding: 2rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        border: 1px solid var(--primary-dark);
    }
    
    /* Section Header */
    .section-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--primary-dark);
    }
    
    .section-header i {
        font-size: 1.75rem;
        color: var(--primary);
    }
    
    .section-header h2 {
        margin: 0;
        color: var(--primary);
        font-size: 1.75rem;
    }
    
    /* Simple Text */
    .simple-text {
        margin-bottom: 2rem;
    }
    
    .simple-text p {
        font-size: 1.1rem;
        line-height: 1.6;
        margin-bottom: 1.5rem;
    }
    
    /* Quiz Features */
    .quiz-features {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin: 1.5rem 0;
    }
    
    .feature-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        background-color: var(--darker);
        padding: 1.25rem;
        border-radius: 8px;
        border: 1px solid var(--primary-dark);
    }
    
    .feature-item i {
        font-size: 2rem;
        color: var(--primary);
        flex-shrink: 0;
    }
    
    .feature-text {
        flex-grow: 1;
    }
    
    .feature-text h3 {
        margin: 0 0 0.5rem 0;
        font-size: 1.2rem;
        color: var(--text);
    }
    
    .feature-text p {
        margin: 0;
        font-size: 0.95rem;
        color: var(--text-muted);
    }
    
    /* Difficulty Section */
    .difficulty-section {
        background-color: var(--darker);
        padding: 1.5rem;
        border-radius: 10px;
        text-align: center;
        border: 1px solid var(--primary-dark);
    }
    
    .difficulty-section h3 {
        margin-bottom: 1rem;
        color: var(--text);
        font-size: 1.2rem;
    }
    
    .difficulty-options {
        display: flex;
        justify-content: center;
        gap: 1rem;
    }
    
    .difficulty-option {
        background-color: var(--medium-dark);
        border: 1px solid var(--primary-dark);
        color: var(--text);
        padding: 1rem;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        min-width: 120px;
    }
    
    .difficulty-option i {
        color: var(--primary);
    }
    
    .difficulty-option:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .difficulty-option.selected {
        background-color: var(--primary-dark);
        color: var(--dark);
        transform: translateY(-3px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .difficulty-option.selected i {
        color: var(--dark);
    }
    
    /* Buttons */
    .primary-button {
        background-color: var(--primary);
        color: var(--dark);
        border: none;
        padding: 0.9rem 1.75rem;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1.1rem;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        min-width: 180px;
        justify-content: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .primary-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }
    
    .secondary-button {
        background-color: var(--darker);
        color: var(--text);
        border: 1px solid var(--primary-dark);
        padding: 0.9rem 1.75rem;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1.1rem;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        min-width: 180px;
        justify-content: center;
    }
    
    .secondary-button:hover {
        background-color: var(--light-dark);
        transform: translateY(-3px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    /* Quiz Questions UI */
    .quiz-progress-header {
        margin: -2rem -2rem 2rem -2rem;
        padding: 1.25rem 2rem;
        background-color: var(--darker);
        border-bottom: 1px solid var(--primary-dark);
    }
    
    .progress-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.75rem;
        font-size: 1.1rem;
    }
    
    .score-display {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .score-display i {
        color: var(--primary);
    }
    
    .progress-bar {
        height: 10px;
        background-color: var(--dark);
        border-radius: 5px;
        overflow: hidden;
    }
    
    .progress-value {
        height: 100%;
        background: linear-gradient(90deg, var(--primary-dark), var(--primary));
        transition: width 0.5s ease;
    }
    
    .question-container {
        padding: 0 1rem;
    }
    
    .question-category {
        display: inline-block;
        background-color: var(--primary-dark);
        color: var(--dark);
        padding: 0.4rem 0.8rem;
        border-radius: 4px;
        font-size: 0.9rem;
        margin-bottom: 0.75rem;
        font-weight: 500;
    }
    
    .question-text {
        font-size: 1.3rem;
        margin-bottom: 1.5rem;
        color: var(--text);
    }
    
    .simple-options {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-bottom: 1.5rem;
    }
    
    .simple-option {
        background-color: var(--darker);
        padding: 1rem 1.25rem;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.2s ease;
        display: flex;
        align-items: center;
        gap: 1rem;
        border: 1px solid var(--darker);
    }
    
    .simple-option:hover {
        background-color: var(--light-dark);
    }
    
    .simple-option.selected {
        background-color: var(--primary-dark);
        color: var(--dark);
        border-color: var(--primary);
    }
    
    .simple-option.correct {
        background-color: rgba(0, 255, 65, 0.1);
        border-color: var(--primary);
    }
    
    .simple-option.incorrect {
        background-color: rgba(255, 77, 77, 0.1);
        border-color: #ff4d4d;
    }
    
    .feedback-box {
        background-color: var(--darker);
        padding: 1.5rem;
        border-radius: 8px;
        margin: 1.5rem 0;
        border-left: 4px solid var(--primary);
    }
    
    .feedback-box h3 {
        color: var(--primary);
        margin-top: 0;
        margin-bottom: 0.75rem;
        font-size: 1.3rem;
    }
    
    /* Navigation */
    .question-navigation {
        display: flex;
        justify-content: space-between;
        margin-top: 2rem;
    }
    
    /* Results UI */
    .results-summary {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
        margin: 2rem 0;
    }
    
    .score-circle {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary-dark), var(--primary));
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
    }
    
    #final-score {
        font-size: 2.5rem;
        font-weight: bold;
        color: var(--dark);
    }
    
    .score-label {
        color: var(--dark);
        font-size: 1rem;
    }
    
    .results-details {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 2rem;
    }
    
    .result-stat {
        text-align: center;
    }
    
    .stat-label {
        font-size: 1rem;
        color: var(--text-muted);
        margin-bottom: 0.5rem;
    }
    
    .stat-value {
        font-size: 1.5rem;
        font-weight: bold;
    }
    
    .badge-container {
        display: flex;
        justify-content: center;
        margin: 2rem 0;
    }
    
    .badge {
        background-color: var(--darker);
        padding: 1.5rem;
        border-radius: 8px;
        text-align: center;
        border: 1px solid var(--primary-dark);
        width: 200px;
    }
    
    .badge-icon {
        font-size: 3rem;
        color: var(--primary);
        margin-bottom: 1rem;
    }
    
    .badge-name {
        font-weight: 600;
        font-size: 1.2rem;
    }
    
    .action-buttons {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
        margin-top: 2rem;
    }
    
    /* Responsive Design */
    @media (min-width: 768px) {
        .quiz-features {
            flex-direction: row;
            flex-wrap: wrap;
        }
        
        .feature-item {
            flex: 1;
            min-width: 220px;
        }
        
        .results-summary {
            flex-direction: row;
            justify-content: center;
            align-items: center;
        }
    }
    
    @media (max-width: 768px) {
        .difficulty-options {
            flex-direction: column;
            align-items: center;
        }
        
        .difficulty-option {
            width: 100%;
            max-width: 250px;
        }
        
        .action-buttons {
            flex-direction: column;
            align-items: center;
        }
        
        .primary-button, .secondary-button {
            width: 100%;
        }
        
        .question-navigation {
            flex-direction: column;
            gap: 1rem;
        }
    }
</style>

<script>
    // Quiz data - Now outside DOMContentLoaded for better organization
    const quizData = {
        beginner: [
            {
                category: "Classical Ciphers",
                question: "Which of these is NOT a classical cipher?",
                options: [
                    "Caesar Cipher",
                    "Vigenère Cipher",
                    "AES Cipher",
                    "Substitution Cipher"
                ],
                correctAnswer: 2,
                explanation: "AES (Advanced Encryption Standard) is a modern symmetric encryption algorithm, not a classical cipher. Classical ciphers include Caesar, Vigenère, and substitution ciphers."
            },
            {
                category: "Encryption Basics",
                question: "What is the key characteristic of symmetric encryption?",
                options: [
                    "It uses two different keys for encryption and decryption",
                    "It uses the same key for encryption and decryption",
                    "It doesn't require any keys",
                    "It can only encrypt text, not binary data"
                ],
                correctAnswer: 1,
                explanation: "Symmetric encryption uses the same key for both encryption and decryption. This means both the sender and recipient must have access to the same secret key."
            },
            {
                category: "Historical Context",
                question: "Which ancient civilization is credited with inventing the first known cipher device?",
                options: [
                    "Ancient Egypt",
                    "Ancient Greece",
                    "Sparta",
                    "Ancient Rome"
                ],
                correctAnswer: 2,
                explanation: "The Spartans invented the scytale, a cylinder-shaped device used to decrypt messages written on parchment that was wrapped around it. This is considered one of the first cipher devices."
            },
            {
                category: "Caesar Cipher",
                question: "In a Caesar cipher with a shift of 3, how would the letter 'Z' be encrypted?",
                options: [
                    "C",
                    "W",
                    "A",
                    "X"
                ],
                correctAnswer: 2,
                explanation: "In a Caesar cipher, each letter is shifted a certain number of positions in the alphabet. With a shift of 3, 'Z' wraps around to become 'C' (Z→A→B→C)."
            },
            {
                category: "Cryptography Basics",
                question: "What is the primary purpose of cryptography?",
                options: [
                    "Making data faster to transmit",
                    "Compressing data to save space",
                    "Securing communication by making it unreadable to unauthorized parties",
                    "Creating artistic patterns from data"
                ],
                correctAnswer: 2,
                explanation: "The primary purpose of cryptography is to secure communication from unauthorized access by converting readable information into an unreadable format."
            }
        ],
        intermediate: [
            {
                category: "Hash Functions",
                question: "Which of the following is NOT a property of a secure cryptographic hash function?",
                options: [
                    "Deterministic output",
                    "Reversibility",
                    "Avalanche effect",
                    "Collision resistance"
                ],
                correctAnswer: 1,
                explanation: "Secure hash functions are one-way functions that cannot be reversed. The other options are all important properties of secure hash functions."
            },
            {
                category: "Public Key Cryptography",
                question: "In RSA encryption, which of these keys is used to encrypt a message?",
                options: [
                    "Private key of the sender",
                    "Private key of the recipient",
                    "Public key of the sender",
                    "Public key of the recipient"
                ],
                correctAnswer: 3,
                explanation: "In RSA, messages are encrypted using the recipient's public key, and can only be decrypted using the recipient's private key."
            },
            {
                category: "Digital Signatures",
                question: "What is the main purpose of a digital signature?",
                options: [
                    "To encrypt the message content",
                    "To compress the message for faster transmission",
                    "To verify the identity of the sender and ensure message integrity",
                    "To timestamp when a message was sent"
                ],
                correctAnswer: 2,
                explanation: "Digital signatures are primarily used to verify the identity of the sender (authentication) and ensure that the message has not been altered (integrity)."
            },
            {
                category: "Vigenère Cipher",
                question: "What is the key weakness of the Vigenère cipher that led to its eventual break?",
                options: [
                    "The small key space",
                    "The repeating nature of the key",
                    "The vulnerability to brute force attacks",
                    "The requirement for a shared secret"
                ],
                correctAnswer: 1,
                explanation: "The Vigenère cipher's weakness is the repeating nature of its key. This repetition creates patterns that can be analyzed using techniques like the Kasiski examination to determine the key length."
            },
            {
                category: "Modern Cryptography",
                question: "Which encryption algorithm is currently recommended by NIST for sensitive government information?",
                options: [
                    "DES (Data Encryption Standard)",
                    "3DES (Triple DES)",
                    "AES (Advanced Encryption Standard)",
                    "RC4"
                ],
                correctAnswer: 2,
                explanation: "AES (Advanced Encryption Standard) was selected by NIST in 2001 as the standard for encrypting sensitive government information, replacing the older DES algorithm."
            }
        ],
        advanced: [
            {
                category: "Quantum Cryptography",
                question: "Which of the following encryption algorithms is considered quantum-resistant?",
                options: [
                    "RSA",
                    "ECC (Elliptic Curve Cryptography)",
                    "Lattice-based cryptography",
                    "Diffie-Hellman key exchange"
                ],
                correctAnswer: 2,
                explanation: "Lattice-based cryptography is considered quantum-resistant because it relies on mathematical problems that quantum computers cannot easily solve, unlike RSA and ECC which are vulnerable to Shor's algorithm."
            },
            {
                category: "Zero-Knowledge Proofs",
                question: "What is the main principle of a zero-knowledge proof?",
                options: [
                    "Proving knowledge of a secret without revealing any information about the secret itself",
                    "Encrypting data so that it can be verified without being decrypted",
                    "Using quantum entanglement to transmit encryption keys",
                    "Creating mathematical functions that can only be computed in one direction"
                ],
                correctAnswer: 0,
                explanation: "Zero-knowledge proofs allow one party to prove to another that they know a value or secret without revealing any information about the secret itself."
            },
            {
                category: "Blockchain Cryptography",
                question: "Which cryptographic algorithm does Bitcoin use for its digital signatures?",
                options: [
                    "RSA",
                    "ECDSA (Elliptic Curve Digital Signature Algorithm)",
                    "DSA (Digital Signature Algorithm)",
                    "Ed25519"
                ],
                correctAnswer: 1,
                explanation: "Bitcoin uses ECDSA (Elliptic Curve Digital Signature Algorithm) with the secp256k1 curve for its digital signatures in transactions."
            },
            {
                category: "Homomorphic Encryption",
                question: "What makes homomorphic encryption special compared to traditional encryption?",
                options: [
                    "It's faster than traditional encryption",
                    "It uses quantum mechanics principles",
                    "It allows computations on encrypted data without decryption",
                    "It can encrypt larger amounts of data"
                ],
                correctAnswer: 2,
                explanation: "Homomorphic encryption allows computations to be performed on encrypted data without decrypting it first, which enables secure processing of sensitive data in untrusted environments."
            },
            {
                category: "Secure Multi-party Computation",
                question: "In secure multi-party computation, what is the main goal?",
                options: [
                    "To encrypt data so only authorized parties can access it",
                    "To compute a function across multiple inputs while keeping each input private",
                    "To validate digital signatures from multiple parties",
                    "To ensure all parties have the same encryption keys"
                ],
                correctAnswer: 1,
                explanation: "Secure multi-party computation allows multiple parties to jointly compute a function over their inputs while keeping those inputs private, with no party learning anything beyond what can be inferred from their own input and the result."
            }
        ]
    };

    document.addEventListener('DOMContentLoaded', function() {
        // DOM elements
        const startScreen = document.getElementById('quiz-start-screen');
        const questionsScreen = document.getElementById('quiz-questions-screen');
        const resultsScreen = document.getElementById('quiz-results-screen');
        const difficultyButtons = document.querySelectorAll('.difficulty-option');
        const startQuizButton = document.getElementById('start-quiz-button');
        const questionContainer = document.getElementById('question-container');
        const currentQuestionElement = document.getElementById('current-question-num');
        const totalQuestionsElement = document.getElementById('total-questions');
        const progressValueElement = document.querySelector('.progress-value');
        const scoreElement = document.getElementById('current-score');
        
        // Quiz variables
        let currentLevel = 'beginner';
        let currentQuestion = 0;
        let score = 0;
        let correctAnswers = 0;
        let selectedAnswers = [];
        let questions = [];
        
        // Level selection
        difficultyButtons.forEach(button => {
            button.addEventListener('click', function() {
                difficultyButtons.forEach(btn => btn.classList.remove('selected'));
                this.classList.add('selected');
                currentLevel = this.getAttribute('data-level');
            });
        });
        
        // Start quiz
        startQuizButton.addEventListener('click', function() {
            startScreen.style.display = 'none';
            questionsScreen.style.display = 'block';
            initQuiz();
        });
        
        // Initialize quiz
        function initQuiz() {
            // Select questions based on level
            questions = [...quizData[currentLevel]];
            
            // Reset variables
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
            selectedAnswers = Array(questions.length).fill(-1);
            
            // Update UI elements
            totalQuestionsElement.textContent = questions.length;
            currentQuestionElement.textContent = currentQuestion + 1;
            scoreElement.textContent = score;
            progressValueElement.style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
            
            // Show first question
            showQuestion();
        }
        
        // Show question
        function showQuestion() {
            if (currentQuestion >= questions.length) {
                showResults();
                return;
            }
            
            const questionData = questions[currentQuestion];
            
            // Create question element
            questionContainer.innerHTML = `
                <div class="quiz-question" id="question-${currentQuestion}">
                    <div class="question-category">${questionData.category}</div>
                    <div class="question-text">${questionData.question}</div>
                    <div class="simple-options">
                        ${questionData.options.map((option, index) => `
                            <div class="simple-option ${selectedAnswers[currentQuestion] === index ? 'selected' : ''}" data-index="${index}">
                                <input type="radio" name="question${currentQuestion}" ${selectedAnswers[currentQuestion] === index ? 'checked' : ''}>
                                <span class="option-text">${option}</span>
                            </div>
                        `).join('')}
                    </div>
                    ${selectedAnswers[currentQuestion] !== -1 ? `
                        <div class="feedback-box">
                            <h3>${selectedAnswers[currentQuestion] === questionData.correctAnswer ? 'Correct!' : 'Incorrect!'}</h3>
                            <p>${questionData.explanation}</p>
                        </div>
                    ` : ''}
                </div>
                <div class="question-navigation">
                    ${currentQuestion > 0 ? `
                        <button class="secondary-button" id="prev-question">
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                    ` : `<div></div>`}
                    ${selectedAnswers[currentQuestion] !== -1 ? `
                        <button class="primary-button" id="next-question">
                            ${currentQuestion === questions.length - 1 ? 'Finish Quiz' : 'Next Question'} <i class="fas fa-arrow-right"></i>
                        </button>
                    ` : ''}
                </div>
            `;
            
            // Add event listeners to options
            const options = document.querySelectorAll('.simple-option');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    if (selectedAnswers[currentQuestion] !== -1) return; // Already answered
                    
                    const selectedIndex = parseInt(this.getAttribute('data-index'));
                    selectAnswer(selectedIndex);
                });
            });
            
            // Add event listeners to navigation buttons
            const prevButton = document.getElementById('prev-question');
            const nextButton = document.getElementById('next-question');
            
            if (prevButton) {
                prevButton.addEventListener('click', function() {
                    currentQuestion--;
                    currentQuestionElement.textContent = currentQuestion + 1;
                    progressValueElement.style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
                    showQuestion();
                });
            }
            
            if (nextButton) {
                nextButton.addEventListener('click', function() {
                    if (currentQuestion === questions.length - 1) {
                        showResults();
                    } else {
                        currentQuestion++;
                        currentQuestionElement.textContent = currentQuestion + 1;
                        progressValueElement.style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
                        showQuestion();
                    }
                });
            }
        }
        
        // Select answer
        function selectAnswer(selectedIndex) {
            const questionData = questions[currentQuestion];
            const isCorrect = selectedIndex === questionData.correctAnswer;
            
            // Update selected answers array
            selectedAnswers[currentQuestion] = selectedIndex;
            
            // Update score
            if (isCorrect) {
                score += 10;
                correctAnswers++;
                scoreElement.textContent = score;
            }
            
            // Update UI
            const options = document.querySelectorAll('.simple-option');
            options.forEach((option, index) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (index === selectedIndex) {
                    option.classList.add('selected');
                    option.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
                if (index === questionData.correctAnswer && !isCorrect) {
                    option.classList.add('correct');
                }
                
                // Update radio buttons
                const radio = option.querySelector('input[type="radio"]');
                radio.checked = (index === selectedIndex);
            });
            
            // Add explanation
            const questionElement = document.getElementById(`question-${currentQuestion}`);
            const explanationDiv = document.createElement('div');
            explanationDiv.classList.add('feedback-box');
            explanationDiv.innerHTML = `
                <h3>${isCorrect ? 'Correct!' : 'Incorrect!'}</h3>
                <p>${questionData.explanation}</p>
            `;
            
            if (!questionElement.querySelector('.feedback-box')) {
                questionElement.querySelector('.simple-options').after(explanationDiv);
            }
            
            // Add next button if not already present
            if (!document.getElementById('next-question')) {
                const navigationDiv = document.querySelector('.question-navigation');
                const nextButton = document.createElement('button');
                nextButton.classList.add('primary-button');
                nextButton.id = 'next-question';
                nextButton.innerHTML = `${currentQuestion === questions.length - 1 ? 'Finish Quiz' : 'Next Question'} <i class="fas fa-arrow-right"></i>`;
                
                nextButton.addEventListener('click', function() {
                    if (currentQuestion === questions.length - 1) {
                        showResults();
                    } else {
                        currentQuestion++;
                        currentQuestionElement.textContent = currentQuestion + 1;
                        progressValueElement.style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
                        showQuestion();
                    }
                });
                
                navigationDiv.appendChild(nextButton);
            }
        }
        
        // Show results
        function showResults() {
            questionsScreen.style.display = 'none';
            resultsScreen.style.display = 'block';
            
            // Calculate results
            const totalAnswered = selectedAnswers.filter(answer => answer !== -1).length;
            const accuracy = totalAnswered > 0 ? Math.round((correctAnswers / totalAnswered) * 100) : 0;
            
            // Update results screen
            document.getElementById('final-score').textContent = score;
            document.getElementById('correct-count').textContent = correctAnswers;
            document.getElementById('total-count').textContent = totalAnswered;
            document.getElementById('accuracy-percent').textContent = accuracy;
            
            // Set feedback message and badge based on score
            const feedbackMessage = document.getElementById('feedback-message');
            const badgeIcon = document.getElementById('badge-icon');
            const badgeName = document.getElementById('badge-name');
            
            if (score >= 40) {
                feedbackMessage.textContent = 'Excellent work! You have a strong understanding of cryptography concepts.';
                badgeIcon.innerHTML = '<i class="fas fa-crown"></i>';
                badgeName.textContent = 'Crypto Master';
            } else if (score >= 30) {
                feedbackMessage.textContent = 'Great job! You have a solid grasp of cryptography fundamentals.';
                badgeIcon.innerHTML = '<i class="fas fa-brain"></i>';
                badgeName.textContent = 'Crypto Scholar';
            } else if (score >= 20) {
                feedbackMessage.textContent = 'Good effort! You're making progress in understanding cryptography.';
                badgeIcon.innerHTML = '<i class="fas fa-user-graduate"></i>';
                badgeName.textContent = 'Crypto Apprentice';
            } else {
                feedbackMessage.textContent = 'Keep learning! Cryptography can be challenging, but you'll improve with practice.';
                badgeIcon.innerHTML = '<i class="fas fa-seedling"></i>';
                badgeName.textContent = 'Crypto Novice';
            }
            
            // Add event listeners to buttons
            document.getElementById('review-answers-button').addEventListener('click', function() {
                // This would typically show a review of all answers
                alert('This feature will show a detailed review of all your answers.');
            });
            
            document.getElementById('retry-quiz-button').addEventListener('click', function() {
                resultsScreen.style.display = 'none';
                startScreen.style.display = 'block';
            });
        }
    });
</script>
