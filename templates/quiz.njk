---
layout: layout.njk
title: Cryptography Quiz - CipherLab
---
<section class="hero" id="quiz-hero">
    <div class="hero-gradient-container"></div>
    <div class="row hero-row">
        <div class="col-12 text-center">
            <h1 class="page-heading">Cryptography Quiz</h1>
            <div class="hero-content">
                <p class="mb-4 fade-in hero-subtitle">Test your cryptography knowledge and earn a certificate</p>
            </div>
        </div>
    </div>
</section>

<section class="container section">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            {% include "learn/final-quiz.njk" %}
        </div>
    </div>
</section>

<!-- Direct Auto-pass fix -->
<script>
// Wait for the page to fully load before setting up the "o" trick
document.addEventListener('DOMContentLoaded', function() {
    // Give page a moment to initialize everything
    setTimeout(function() {
        // Find the trigger
        const trigger = document.getElementById('secret-pass-trigger');
        if (!trigger) return;
        
        // Clean up existing event handlers
        const newTrigger = trigger.cloneNode(true);
        if (trigger.parentNode) {
            trigger.parentNode.replaceChild(newTrigger, trigger);
        }
        
        // Simple counter
        let clicks = 0;
        
        // Add direct click handler
        newTrigger.onclick = function(e) {
            // Prevent default
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            // Count clicks
            clicks++;
            
            // Simple visual feedback
            newTrigger.style.color = '#00FF41';
            setTimeout(() => newTrigger.style.color = '', 300);
            
            // On third click, execute direct answers filling
            if (clicks >= 3) {
                // Reset counter
                clicks = 0;
                
                // Only proceed if we have quiz data
                if (!window.quizData || !Array.isArray(window.quizData)) {
                    alert('Quiz not initialized yet. Please try again in a moment.');
                    return;
                }
                
                // Direct filling of correct answers - the simplest approach
                window.userAnswers = window.quizData.map(q => q.correctAnswer);
                window.quizStarted = true;
                
                // Simple visual success notification
                const notification = document.createElement('div');
                notification.innerHTML = '<i class="fas fa-trophy"></i> Quiz Passed!';
                notification.style.position = 'fixed';
                notification.style.top = '20px';
                notification.style.left = '50%';
                notification.style.transform = 'translateX(-50%)';
                notification.style.background = '#00FF41';
                notification.style.color = '#000';
                notification.style.padding = '10px 20px';
                notification.style.borderRadius = '5px';
                notification.style.zIndex = '9999';
                document.body.appendChild(notification);
                
                // Direct call to submit - bypass all complexity
                if (typeof window.submitQuiz === 'function') {
                    window.submitQuiz();
                } else {
                    // Fallback direct UI update
                    const resultsSection = document.getElementById('final-quiz-results');
                    const questionsSection = document.getElementById('final-quiz-questions');
                    const introSection = document.getElementById('final-quiz-intro');
                    
                    // Show results, hide other sections
                    if (introSection) introSection.style.display = 'none';
                    if (questionsSection) questionsSection.style.display = 'none';
                    if (resultsSection) {
                        resultsSection.style.display = 'block';
                        
                        // Update score display
                        const scoreEl = document.getElementById('final-score');
                        const percentageEl = document.getElementById('score-percentage');
                        const certLevelEl = document.getElementById('cert-level');
                        
                        if (scoreEl) scoreEl.textContent = window.quizData.length;
                        if (percentageEl) percentageEl.textContent = '100%';
                        if (certLevelEl) certLevelEl.textContent = 'Master Cryptographer';
                        
                        // Show pass message, hide fail message
                        const passMsg = document.getElementById('pass-message');
                        const failMsg = document.getElementById('fail-message');
                        
                        if (passMsg) passMsg.style.display = 'block';
                        if (failMsg) failMsg.style.display = 'none';
                    }
                }
                
                // Remove notification after 2 seconds
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 2000);
            }
        };
    }, 500); // Wait half second for everything to initialize
});
</script>

<style>
    /* Page heading styling */
    .page-heading {
        color: var(--primary);
        font-size: 3rem;
        margin-bottom: 1.5rem;
        text-align: center;
        font-weight: 700;
        position: relative;
        display: inline-block;
    }
    
    /* Hero subtitle styling */
    .hero-subtitle {
        font-size: 1.5rem !important;
        line-height: 1.6 !important;
        color: var(--text) !important;
        margin-top: 1rem !important;
        margin-bottom: 1.5rem !important;
        max-width: 800px !important;
        margin-left: auto !important;
        margin-right: auto !important;
        text-align: center !important;
    }
    
    /* Hero content must be centered */
    .hero-content {
        margin-top: 1rem !important;
        position: relative !important;
        display: block !important;
        width: 100% !important;
        text-align: center !important;
    }
    
    /* Hero Styling */
    #quiz-hero {
        position: relative;
        min-height: 40vh; /* Shorter than main page hero */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 3rem 0;
        width: 100%;
        max-width: 100%;
        pointer-events: auto;
        z-index: 1;
        margin-bottom: 2rem;
    }
    
    /* Force row to be full-width */
    #quiz-hero .hero-row {
        width: 100%;
        max-width: 100%;
        margin: 0 !important;
        padding: 0 1rem;
        overflow: visible;
    }
</style>
